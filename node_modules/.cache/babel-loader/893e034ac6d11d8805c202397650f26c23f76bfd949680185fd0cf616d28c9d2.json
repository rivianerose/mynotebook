{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Riviane/Desktop/projectpt/Course-React-PT/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Riviane/Desktop/projectpt/Course-React-PT/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Riviane/Desktop/projectpt/Course-React-PT/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Riviane/Desktop/projectpt/Course-React-PT/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useForm}from'react-hook-form';import*as yup from'yup';import{yupResolver}from'@hookform/resolvers/yup';import{addDoc,collection}from'firebase/firestore';import{auth,db}from'../../config/firebase';import{useAuthState}from'react-firebase-hooks/auth';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CreateForm=function CreateForm(){var _errors$title,_errors$description;var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var navigate=useNavigate();var schema=yup.object().shape({title:yup.string().required(\"You must add a title.\"),description:yup.string().required(\"You must add a description.\")});var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var postsRef=collection(db,\"posts\");var onCreatePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return addDoc(postsRef,_objectSpread(_objectSpread({},data),{},{username:user===null||user===void 0?void 0:user.displayName,userId:user===null||user===void 0?void 0:user.uid}));case 2:navigate(\"/\");case 3:case\"end\":return _context.stop();}},_callee);}));return function onCreatePost(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onCreatePost),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({placeholder:\"Title...\"},register(\"title\"))),/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[\" \",(_errors$title=errors.title)===null||_errors$title===void 0?void 0:_errors$title.message]}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread({placeholder:\"Description...\"},register(\"description\"))),/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[\" \",(_errors$description=errors.description)===null||_errors$description===void 0?void 0:_errors$description.message]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"submitForm\"})]});};","map":{"version":3,"names":["React","useForm","yup","yupResolver","addDoc","collection","auth","db","useAuthState","useNavigate","jsx","_jsx","jsxs","_jsxs","CreateForm","_errors$title","_errors$description","_useAuthState","_useAuthState2","_slicedToArray","user","navigate","schema","object","shape","title","string","required","description","_useForm","resolver","register","handleSubmit","errors","formState","postsRef","onCreatePost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","_objectSpread","username","displayName","userId","uid","stop","_x","apply","arguments","onSubmit","children","placeholder","style","color","message","type","className"],"sources":["C:/Users/Riviane/Desktop/projectpt/Course-React-PT/src/pages/create-post/create-form.tsx"],"sourcesContent":["import React from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport { addDoc, collection } from 'firebase/firestore'\r\nimport {auth, db} from '../../config/firebase'\r\nimport { useAuthState } from 'react-firebase-hooks/auth'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\ninterface CreateFormData {\r\ntitle: string;\r\ndescription: string; \r\n}\r\n\r\nexport const CreateForm = () => {\r\n  const [user] = useAuthState(auth); \r\n\r\n  const navigate = useNavigate() ;\r\n\r\n  const schema = yup.object().shape({\r\n    title: yup.string().required(\"You must add a title.\"),\r\n    description: yup.string().required(\"You must add a description.\"),\r\n  })\r\n\r\n  const { register, handleSubmit, formState: { errors }, } = useForm <CreateFormData>({\r\n    resolver: yupResolver(schema)\r\n  })\r\n\r\nconst postsRef = collection(db, \"posts\");\r\n\r\n\r\nconst onCreatePost = async (data: CreateFormData) => { await\r\naddDoc(postsRef, {\r\n  ...data,\r\n  username: user?.displayName,\r\n  userId: user?.uid, \r\n});\r\n\r\nnavigate(\"/\");\r\n};\r\n\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onCreatePost)}>\r\n      <input placeholder='Title...' {... register(\"title\")} />\r\n      <p style={{color: 'red'}}> {errors.title?.message}</p>\r\n      <textarea placeholder='Description...'  {... register(\"description\")}/>\r\n      <p style={{color: 'red'}}> {errors.description?.message}</p>\r\n     <input type=\"submit\" className='submitForm'/>\r\n    </form>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}